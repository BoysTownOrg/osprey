


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The Official Documentation for Osprey">
      
      
        <link rel="canonical" href="https://schorschinho.github.io/osprey/04-osprey-gui-tutorial/01-osprey-gui-tutorial/">
      
      
        <meta name="author" content="Georg Oeltzschner">
      
      <link rel="shortcut icon" href="../../img/osprey.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.6">
    
    
      
        <title>Osprey GUI Tutorial - Osprey documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b9ffd7b.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.b79bcd20.min.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="black" data-md-color-accent="deep-orange">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#osprey-gui-tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://schorschinho.github.io/osprey/" title="Osprey documentation" class="md-header-nav__button md-logo" aria-label="Osprey documentation">
      
  <img src="../../img/osprey.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Osprey documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Osprey GUI Tutorial
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/schorschinho/osprey" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    schorschinho/osprey
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://schorschinho.github.io/osprey/" title="Osprey documentation" class="md-nav__button md-logo" aria-label="Osprey documentation">
      
  <img src="../../img/osprey.png" alt="logo">

    </a>
    Osprey documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/schorschinho/osprey" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    schorschinho/osprey
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../02-osprey-workflow/01-structure-workflow/" title="The Osprey Workflow" class="md-nav__link">
      The Osprey Workflow
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting started
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Getting started" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../01-getting-started/01-system-requirements/" title="System requirements" class="md-nav__link">
      System requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01-getting-started/02-installing-osprey/" title="Installing Osprey" class="md-nav__link">
      Installing Osprey
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01-getting-started/03-organize-data/" title="How to organize your raw data" class="md-nav__link">
      How to organize your raw data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../03-job-files/01-the-job-file/" title="Job files" class="md-nav__link">
      Job files
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Osprey GUI Tutorial
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Osprey GUI Tutorial" class="md-nav__link md-nav__link--active">
      Osprey GUI Tutorial
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-starting-osprey" class="md-nav__link">
    1. Starting Osprey
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-loading-a-job-file" class="md-nav__link">
    2. Loading a job file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-loading-the-raw-mrs-data" class="md-nav__link">
    3. Loading the raw MRS data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-processing-the-raw-data" class="md-nav__link">
    3. Processing the raw data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-fitting-the-spectra" class="md-nav__link">
    4. Fitting the spectra
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-co-registering-to-an-anatomical-image" class="md-nav__link">
    5. Co-registering to an anatomical image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-segmentation-and-tissue-fraction-calculation" class="md-nav__link">
    6. Segmentation and tissue fraction calculation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-quantification" class="md-nav__link">
    7. Quantification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-overview" class="md-nav__link">
    8. Overview
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-starting-osprey" class="md-nav__link">
    1. Starting Osprey
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-loading-a-job-file" class="md-nav__link">
    2. Loading a job file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-loading-the-raw-mrs-data" class="md-nav__link">
    3. Loading the raw MRS data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-processing-the-raw-data" class="md-nav__link">
    3. Processing the raw data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-fitting-the-spectra" class="md-nav__link">
    4. Fitting the spectra
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-co-registering-to-an-anatomical-image" class="md-nav__link">
    5. Co-registering to an anatomical image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-segmentation-and-tissue-fraction-calculation" class="md-nav__link">
    6. Segmentation and tissue fraction calculation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-quantification" class="md-nav__link">
    7. Quantification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-overview" class="md-nav__link">
    8. Overview
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="osprey-gui-tutorial">Osprey GUI tutorial<a class="headerlink" href="#osprey-gui-tutorial" title="Permanent link">&para;</a></h1>
<p>This tutorial describes each step of the <strong>Osprey</strong> analysis workflow using the graphical user interface.</p>
<p>We will learn how to start the GUI, select the job file, load the raw data, process them into spectra, model the processed spectra, co-register the voxel to anatomical images, segment the anatomical images, and derive quantitative metabolite estimates.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In this documentation chapter, we will use the <code>jobTwix.m</code> job file in the <code>exampledata/twix/</code> directory of the <a href="https://github.com/schorschinho/osprey"><strong>Osprey</strong> repository</a>.</p>
</div>
<h2 id="1-starting-osprey">1. Starting Osprey<a class="headerlink" href="#1-starting-osprey" title="Permanent link">&para;</a></h2>
<p>At the MATLAB prompt, enter</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;</span> <span class="n">Osprey</span>
</code></pre></div>

<p>This will initiate the <strong>Osprey</strong> GUI application and the underlying processing modules. Once the startup is complete, you will see the <strong>Osprey</strong> startup menu box:</p>
<p><img src="../../img/04-osprey-startup-menu.png" alt="Osprey Startup Menu" width="200"/></p>
<h2 id="2-loading-a-job-file">2. Loading a job file<a class="headerlink" href="#2-loading-a-job-file" title="Permanent link">&para;</a></h2>
<p>Click the <code>Load Job file</code> button, navigate to the <code>exampledata/twix</code> directory, and add the file <code>jobTwix.m</code> to the right column:</p>
<p><img src="../../img/04-osprey-select-job-file.png" alt="Select job file"/></p>
<p>Click <code>Done</code>. If you have run an <strong>Osprey</strong> analysis previously with the same output folder specified in the job file, you will be shown a warning:</p>
<p><img src="../../img/04-warning-overwrite.png" alt="Overwrite warning"/></p>
<p>Click <code>Yes</code>. <strong>Osprey</strong> will now extract all necessary information from the job file you selected by running the <code>OspreyJob</code> module in the background. The next window you see is the main GUI:</p>
<p><img src="../../img/04-osprey-gui-job.png" alt="Osprey GUI after OspreyJob"/></p>
<p>In the bottom left corner, you see a list of datasets included in the job file definition.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>All tabs and buttons (except <code>Load Data</code>, <code>Save MRSCont</code>, and <code>Exit</code>) are greyed out at this stage. They will become gradually available as we progress through the analysis workflow.</p>
</div>
<h2 id="3-loading-the-raw-mrs-data">3. Loading the raw MRS data<a class="headerlink" href="#3-loading-the-raw-mrs-data" title="Permanent link">&para;</a></h2>
<p>Click the <code>Load data</code> button to initiate the loading process of the raw MRS data. <strong>Osprey</strong> will now extract the raw FIDs and header data (and perform coil combination, if applicable) by running the <code>OspreyLoad</code> module in the background. For larger files (with separate FIDs for each coil), this process may take a few seconds per dataset. You can monitor the progress through the wait bar.</p>
<p>Once the loading process is complete, you can see the coil-combined, but un-aligned and un-averaged data. You can select the dataset you wish to be displayed by clicking on the entry in the dataset list in the bottom left corner:</p>
<table>
  <tr>
    <th style="text-align:center">First dataset</th>
    <th style="text-align:center">Second dataset</th>
  </tr>
  <tr>
    <td halign="center"><img src="../../img/04-load-mets-1.png"></td>
    <td halign="center"><img src="../../img/04-load-mets-2.png"></td>
  </tr>
</table>

<p>By clicking the <code>metabolites</code>, <code>reference</code> and <code>water</code> tabs at the bottom of the window, you can display the water-suppressed, lineshape reference, and short-TE water data (if applicable):</p>
<table>
   <tr>
     <th style="text-align:center">Metabolite data</th>
     <th style="text-align:center">Lineshape reference data</th>
     <th style="text-align:center">Short-TE water data</th>
   </tr>
   <tr>
     <td halign="center"><img src="../../img/04-load-mets-1.png"></td>
     <td halign="center"><img src="../../img/04-load-ref-1.png"></td>
     <td halign="center"><img src="../../img/04-load-w-1.png"></td>
   </tr>
</table>

<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In the box above the spectrum display, you will find useful information about the sequence, such as TR/TE, number of averages, voxel dimensions, etc.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can export a PDF of the spectrum (along with the information box) by clicking on the <code>Save PDF</code> button in the top right corner of the window.</p>
</div>
<h2 id="3-processing-the-raw-data">3. Processing the raw data<a class="headerlink" href="#3-processing-the-raw-data" title="Permanent link">&para;</a></h2>
<p>Click the (now available!) <code>Process data</code> button to initiate the post-processing. <strong>Osprey</strong> will now perform all appropriate processing steps (depending on the available data: eddy-current correction, frequency-and-phase alignment, water removal, frequency referencing, initial phasing) by running the <code>OspreyProcess</code> module in the background. This process may take several seconds per dataset. You can monitor the progress through the wait bar.</p>
<p>Once the post-processing is complete, the <code>Processed</code> tab becomes active, showing four different panels:</p>
<p><img src="../../img/04-process-mets.png" alt="Osprey GUI after OspreyProcess"/></p>
<p>The top left panel shows the individual averages prior to frequency-and-phase alignment. The bottom left panel shows them after frequency-and-phase alignment.
The top right panel shows a scatter plot of the maximum of the 3.02 ppm Cr/PCr signal over the course of the acquisition for both pre- and post-alignment. Finally, the bottom right panel shows the aligned, averaged and referenced spectrum after eddy-current correction and residual water removal. This spectrum will be passed on to the <code>Fit</code> module for modelling.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can go back to inspecting the raw data by clicking the <code>Raw</code> tab at the top of the window.</p>
</div>
<p>Again, you can display each dataset by selecting it from the dataset list in the bottom left corner, and you can look at the water reference data by clicking on the tabs at the bottom of the window.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In the box above the spectrum display, you will find some data quality metrics, such as the signal-to-noise ratio (SNR), linewidth (FWHM), and average frequency drift pre- and post-alignment.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can export a PDF of the four post-processing display panels (along with the information box) by clicking on the <code>Save PDF</code> button in the top right corner of the window.</p>
</div>
<h2 id="4-fitting-the-spectra">4. Fitting the spectra<a class="headerlink" href="#4-fitting-the-spectra" title="Permanent link">&para;</a></h2>
<p>Click the (now available!) <code>Fit data</code> button to initiate the post-processing. <strong>Osprey</strong> will now model the processed metabolite and water spectra by running the <code>OspreyFit</code> module in the background. This process may take from a few seconds up to a minute or more per dataset, depending on the complexity of the model. You can monitor the progress through the wait bar.</p>
<p>Once the modelling is complete, the <code>Fit</code> tab becomes active:</p>
<p><img src="../../img/04-fit-mets.png" alt="Osprey GUI after OspreyFit"/></p>
<p>The <code>Fit</code> tab displays the complete fit overlaid on top of the data, along with the smooth cubic B-spline baseline, and the fit residual at the top.
Below, the contributions from each basis functions are plotted, with the estimated lineshape convolution, linebroadening and frequency shift parameters applied. For better display, the phase parameters have been applied to the spectrum, so that the basis functions appear without phase.
The left panel shows the raw water-scaled metabolite estimates, i.e. the signal amplitudes normalized by the water amplitude. The amplitude parameters will subsequently be used during the quantification process to derive tCr ratios and water-scaled estimates.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can go back to the previous analysis steps by clicking the <code>Raw</code> or <code>Processed</code> tabs at the top of the window.</p>
</div>
<p>Again, you can display each dataset by selecting it from the dataset list in the bottom left corner, and you can look at the water reference data fits by clicking on the tabs at the bottom of the window.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In the box above the spectrum display, you will find fit parameters and information, such as the number of basis functions used, phase estimates, and scaling factors.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can export a PDF of the fit (along with the information box) by clicking on the <code>Save PDF</code> button in the top right corner of the window.</p>
</div>
<h2 id="5-co-registering-to-an-anatomical-image">5. Co-registering to an anatomical image<a class="headerlink" href="#5-co-registering-to-an-anatomical-image" title="Permanent link">&para;</a></h2>
<p>Click the <code>CoRegister</code> button to initiate the SPM routines for co-registering a voxel to a T1-weighted anatomical image. <strong>Osprey</strong> will now parse the voxel geometry information and create the voxel mask by running the <code>OspreyCoReg</code> module in the background. This process will take a few seconds per dataset. You can monitor the progress through the wait bar.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you are only interested in the voxel mask, you can skip the <code>Process</code> and <code>Fit</code> steps of the analysis. The <code>CoRegister</code> button becomes available after the <code>Load data</code> analysis step has been completed.</p>
</div>
<p>Once the co-registration is complete, the <code>Cor/Seg</code> tab becomes active:</p>
<p><img src="../../img/04-coreg.png" alt="Osprey GUI after OspreyCoReg"/></p>
<p>You can see an overlay of the voxel mask on top of the anatomical image in three directions.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can export a PDF of the co-registration display by clicking on the <code>Save PDF</code> button in the top right corner of the window.</p>
</div>
<h2 id="6-segmentation-and-tissue-fraction-calculation">6. Segmentation and tissue fraction calculation<a class="headerlink" href="#6-segmentation-and-tissue-fraction-calculation" title="Permanent link">&para;</a></h2>
<p>Click the <code>Segment</code> button to initiate the determination of the tissue volume fractions for the co-registered voxel. <strong>Osprey</strong> will now call the SPM12 segmentation functions and calculate the fractions of grey matter, white matter, and cerebrospinal fluid by running the <code>OspreySeg</code> module in the background. If you have previously segmented the images, this step will only take a few seconds. However, if <strong>Osprey</strong> has to initiate the segmentation first, it can take up to several minutes per dataset. You can monitor the progress through the wait bar.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you are only interested in the tissue fractions, you can skip the <code>Process</code> and <code>Fit</code> steps of the analysis. The <code>Segment</code> button becomes available after the <code>Load data</code> and <code>CoRegister</code> analysis steps have been completed.</p>
</div>
<p>Once the segmentation is complete, the <code>Cor/Seg</code> tab features another figure:</p>
<p><img src="../../img/04-seg.png" alt="Osprey GUI after OspreyCoReg"/></p>
<p>Below the overlay produced by <code>CoRegister</code>, you can now see four images showing the voxel mask next to the contributions from grey matter, white matter, and CSF, along with the fractional volume estimates for each tissue class. These values will subsequently be used during quantification to account for tissue-specific effects of relaxation, tissue water content, and metabolite content.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can export a PDF of the combined co-registration/segmentation display by clicking on the <code>Save PDF</code> button in the top right corner of the window.</p>
</div>
<h2 id="7-quantification">7. Quantification<a class="headerlink" href="#7-quantification" title="Permanent link">&para;</a></h2>
<p>Click the <code>Quantify</code> button to have <strong>Osprey</strong> run the <code>OspreyQuantify</code> module in the background. This should take less than a second per dataset. During this process, several quantitative metabolite estimates are calculated, such as tCr ratios and water-scaled estimates with different degrees of sophistication. Please refer to the <strong>Osprey</strong> manuscript for details on the implementation of these quantification routines.</p>
<p>Once the quantification is complete, the <code>Quantify</code> tab becomes active:</p>
<p><img src="../../img/04-seg.png" alt="Osprey GUI after OspreyQuantify"/></p>
<p>This tab contains a bare-bone table of the quantitative results for each basis function and each quantification routine for the selected dataset. These numbers are saved in <code>.CSV</code> format tables in the <code>QuantifyResults</code> sub-directory of the output folder.</p>
<p>At this stage, all analysis steps have been completed. You can save the current state of the analysis by exporting it the <strong>Osprey</strong> data container as a <code>.mat</code> file using the <code>Save MRSCont</code> button. You can re-load it at any time using the <code>Load MRSCont file</code> button in the Osprey startup menu (see Step 1 of this tutorial).</p>
<h2 id="8-overview">8. Overview<a class="headerlink" href="#8-overview" title="Permanent link">&para;</a></h2>
<p>After quantification is complete, another tab becomes active: <code>Overview</code>. This tab contains several visualizations that are interesting for the batched analysis of multiple datasets.</p>
<p>By clicking on the tabs at the bottom of the window, you can cycle through the following visualizations:</p>
<ul>
<li><strong>Spectra</strong>: Displays all processed spectra (or fits) on top of each other in a single plot.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can select the data or complete fits for the metabolite and water data by using the dropdown menu at the top of the window.</p>
</div>
<p><img src="../../img/04-overview-spectra.png" alt="Osprey GUI - Overview Spectra"/></p>
<ul>
<li><strong>Mean spectra</strong>: Displays the mean of spectra (or fits) across all datasets, along with the mean baseline, mean residual, and a ribbon plot representing the standard deviation across all spectra.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can select the metabolite and water data by using the dropdown menu at the top of the window.</p>
</div>
<p><img src="../../img/04-overview-mean-spectra.png" alt="Osprey GUI - Overview Mean spectra"/></p>
<ul>
<li><strong>Mean spectra</strong>: Displays the mean of spectra (or fits) across all datasets, along with the mean baseline, mean residual, and a ribbon plot representing the standard deviation across all spectra.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can select the metabolite and water data by using the dropdown menu at the top of the window.</p>
</div>
<p><img src="../../img/04-overview-mean-spectra.png" alt="Osprey GUI - Overview Spectra"/></p>
<ul>
<li><strong>Quantify table</strong>: Shows a table with the results of a specific quantification routine for all metabolites and all datasets.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can select the quantification routine to be displayed (tCr ratios, raw water-scaled, CSF-corrected water-scaled, tissue-corrected water-scaled) by using the dropdown menu at the top of the window.</p>
</div>
<p><img src="../../img/04-overview-quantify-table.png" alt="Osprey GUI - Overview Quantify Table"/></p>
<ul>
<li><strong>Distribution</strong>: Shows a raincloud plot of the results of a specific quantification routine for a specific metabolite. The raincloud plot includes a visualization of the distribution, the mean and median values of the distribution, standard deviation, and 25% and 75% percentiles. In addition, each data point is shown.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can select the quantification routine to be displayed (tCr ratios, raw water-scaled, CSF-corrected water-scaled, tissue-corrected water-scaled), as well as the particular metabolite you want to study.</p>
<p>By default, the <code>Distribution</code> tab is set to display the tCr ratios of tNAA.</p>
</div>
<p><img src="../../img/04-overview-distribution.png" alt="Osprey GUI - Overview Distribution"/></p>
<ul>
<li><strong>Correlation</strong>: Shows a highly customizable 2D scatter plot of a quantitative metabolite estimate against another quantitative metabolite estimate, or a quality metric. <strong>Osprey</strong> automatically calculates the Pearson correlation coefficient and a p-value (uncorrected for multiple comparisons), and plots the linear regression line with shaded confidence intervals.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can select the quantification routine and metabolite to be correlated, as well as another metabolite or quality metric that it is to be correlated against, by using the dropdown menus at the top of the window.</p>
<p>By default, the <code>Correlation</code> tab is set to display the correlation of tNAA/tCr to SNR.</p>
</div>
<p><img src="../../img/04-overview-correlation.png" alt="Osprey GUI - Overview Correlation"/></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../03-job-files/01-the-job-file/" title="Job files" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Job files
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 - 2020 Georg Oeltzschner
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/schorschinho" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/oeltzschner" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/in/georg-oeltzschner-6b4bb983/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.a0c4167b.min.js"></script>
      <script src="../../assets/javascripts/bundle.fb26dd1d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>